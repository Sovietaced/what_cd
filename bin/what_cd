#!/usr/bin/env ruby

begin
  require 'rubygems'
rescue LoadError
  # no rubygems to load, so we fail silently
end

require 'escort'
require '../lib/what_cd/version'
require '../lib/what_cd/commands/clean_command'


Escort::App.create do |app|
  app.version WhatCD::VERSION
  app.summary "Useful What.CD tools"

  app.command :clean  do |command|
    command.summary "Clean files in a directory per What.CD spec"
    command.description "Clean"

    command.options do |opts|
      opts.opt :dir, "Directory to clean", :short => '-d', :long => '--dir', :type => :string

    end

    command.action do |options, arguments|
      Escort::CleanCommand.new(options, arguments).execute
    end
  end
end